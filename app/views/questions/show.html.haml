!!!
%html
  %head
  %body
    %div
      %h3= "#{@question.title}"
      = raw "#{@question.content}"
      = link_to "#{@question.owner.user_name}", @question.owner
      %br
      = "Score: #{@question.up_votes_count + @question.down_votes_count}"
      - if can? :vote, @question
        = link_to "Up vote", vote_question_path(@question, vote: "up"), method: :put
        = link_to "Down vote", vote_question_path(@question, vote: "down"), method: :put
      - if can? :edit, @question
        = link_to 'Edit', edit_question_path(@question)
      - if can? :destroy, @question
        = link_to 'Delete', question_path(@question), :method => :delete, :data => { :confirm => 'Are you sure?' }

    %ul#answers
      - @answers.each do |answer|
        %li
          = raw "#{answer.content} - "
          = link_to "#{answer.owner.user_name}", answer.owner
          %br/
          = "Score: #{answer.up_votes_count + answer.down_votes_count}"
          - if can? :vote, answer
            = link_to "Up vote", vote_question_answer_path(@question, vote: "up"), method: :put
            = link_to "Down vote", vote_question_answer_path(@question, vote: "down"), method: :put
          - if can? :edit, answer
            = link_to 'Edit', edit_question_answer_path(@question, answer)
          - if can? :destroy, answer
            = link_to 'Delete', question_answer_path(@question, answer), :method => :delete, :data => { :confirm => 'Are you sure?' }
            %ul
              - answer.comments.order(:up_votes_count, :down_votes_count).reverse.each do |comment|
                %li
                  = "#{comment.content} - "
                  = link_to "#{comment.owner.user_name}", comment.owner
                  %br/
                  = "Score: #{comment.up_votes_count + comment.down_votes_count}"
                  - if can? :vote, comment
                    = link_to "Up vote", vote_question_answer_comment_path(@question, answer, comment, vote: "up"), method: :put
                    = link_to "Down vote", vote_question_answer_comment_path(@question, answer, comment, vote: "down"), method: :put
                  - if can? :edit, comment
                    = link_to 'Edit', edit_question_answer_comment_path(@question, answer, comment)
                  - if can? :destroy, comment
                    = link_to 'Delete', question_answer_comment_path(@question, answer, comment), :method => :delete, :data => { :confirm => 'Are you sure?' }

        = form_for [@question, answer, answer.comments.build] do |f|
          %p= f.text_field :content, placeholder: "Comment..."
          %p= f.submit "Post comment", disabled: false
    = form_for [@question, @question.answers.build] do |f|
      %p= f.text_area :content, :class => 'ckeditor', :ckeditor => {:toolbar => "Normal"}, placeholder: "Have a good answer...?"
      %p= f.submit "Post answer", disabled: false

      %hr
